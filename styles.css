:root{
  --bg: #fff2fb;
  --ink: #260016;
  --muted: rgba(38,0,22,.68);

  --card: rgba(255,255,255,.82);
  --card-border: rgba(255,255,255,.60);
  --shadow: 0 22px 70px rgba(255, 0, 120, .12);

  --accent: #ff2bb3;
  --accent-2: #ff4d3d;

  --tint: rgba(255, 45, 179, .18);

  --pin: #ff2bb3;
  --pin-stroke: rgba(20,0,8,.18);

  --radius: 20px;
}

*{ box-sizing: border-box; }

body{
  margin:0;
  font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--ink);
  height: 100dvh;
  display:flex;
  flex-direction:column;

  background:
    radial-gradient(900px 700px at 15% 10%, rgba(255,60,190,.25) 0%, transparent 55%),
    radial-gradient(900px 700px at 85% 18%, rgba(255,110,110,.20) 0%, transparent 55%),
    radial-gradient(1000px 800px at 55% 95%, rgba(180,140,255,.20) 0%, transparent 58%),
    var(--bg);
}

.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding: 14px 16px;
}

.brand__title{
  font-weight: 900;
  letter-spacing: .2px;
  font-size: 18px;
}
.brand__subtitle{
  font-size: 12px;
  color: var(--muted);
  margin-top: 2px;
}

.controls{
  display:flex;
  align-items:center;
  gap:10px;
  justify-content:flex-end;
}

.btn{
  border: 1px solid rgba(0,0,0,.08);
  background: rgba(255,255,255,.78);
  color: var(--ink);
  padding: 10px 12px;
  border-radius: 999px;
  box-shadow: 0 10px 30px rgba(0,0,0,.08);
  cursor:pointer;
  font-weight: 750;
  transition: transform .12s ease;
}
.btn:hover{ transform: translateY(-1px); }
.btn:active{ transform: translateY(0px); }

.btn--ghost{
  background: rgba(255,255,255,.45);
}

.stage{
  position:relative;
  flex: 1;
  min-height: 0;
}

.map{
  position:absolute;
  inset:0;
}

.map-tint{
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(800px 500px at 20% 20%, rgba(255, 45, 179, .18), transparent 60%),
    radial-gradient(900px 700px at 80% 30%, rgba(255, 77, 61, .12), transparent 65%),
    var(--tint);
  mix-blend-mode: multiply;
  opacity: .95;
}

/* Leaflet popup (Y2K sticker card) */
.leaflet-popup-content-wrapper{
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
  overflow:hidden;
}
.leaflet-popup-content{
  margin: 12px 14px 14px;
}
.leaflet-popup-tip{
  background: var(--card);
}

.popup{
  position:relative;
}
.popup::before{
  content:"";
  position:absolute;
  inset:-2px -2px auto -2px;
  height: 38px;
  background:
    linear-gradient(90deg,
      rgba(255,43,179,.22),
      rgba(255,77,61,.16),
      rgba(180,140,255,.18));
  filter: blur(.2px);
  border-radius: 18px 18px 14px 14px;
  opacity:.9;
  pointer-events:none;
}
.popup-title{
  position:relative;
  font-weight: 950;
  margin: 4px 0 6px;
  padding-top: 10px;
  letter-spacing: .2px;
}
.popup-date{
  position:relative;
  font-size: 12px;
  color: var(--muted);
  margin-bottom: 10px;
}
.popup-desc{
  position:relative;
  font-size: 14px;
  line-height: 1.45;
  white-space: normal;
}
.popup-desc .line{
  display:block;
}
.popup-photo{
  width: 100%;
  border-radius: 16px;
  margin-top: 10px;
  display:block;
  border: 1px solid rgba(0,0,0,.06);
}

/* Heart-pin marker */
.heart-pin{
  width: 46px;
  height: 46px;
  transform: translate(-23px, -46px);
  filter: drop-shadow(0 12px 18px rgba(255,0,140,.18))
          drop-shadow(0 10px 18px rgba(0,0,0,.18));
  transition: transform .12s ease;
}
.heart-pin:hover{
  transform: translate(-23px, -48px) scale(1.03);
}
.heart-pin svg{
  width: 46px;
  height: 46px;
  display:block;
}
.heart-pin .pin-fill{ fill: var(--pin); }
.heart-pin .pin-stroke{ stroke: var(--pin-stroke); stroke-width: 1.6; }
.heart-pin .heart-fill{ fill: rgba(255,255,255,.94); }
.heart-pin.is-next .pin-fill{ fill: url(#y2kGrad); }

/* Footer */
.footer{
  padding: 10px 16px 14px;
  font-size: 12px;
  color: var(--muted);
}

/* Space overlay */
.space{
  position:absolute;
  inset:0;
  z-index: 9999;
  display:grid;
  place-items:center;
  overflow:hidden;
}
.space.is-hidden{ display:none; }

.space__stars{
  position:absolute;
  inset:0;
}

.space__veil{
  position:absolute;
  inset:-20%;
  background:
    radial-gradient(900px 700px at 35% 40%, rgba(255,140,180,.35) 0%, transparent 55%),
    radial-gradient(1000px 800px at 70% 30%, rgba(175,150,255,.32) 0%, transparent 60%),
    radial-gradient(1200px 900px at 55% 70%, rgba(255,255,255,.10) 0%, transparent 65%),
    rgba(6, 5, 12, .58);
  backdrop-filter: blur(2px);
}

.space__card{
  position:relative;
  width:min(540px, calc(100vw - 32px));
  background: rgba(255,255,255,.10);
  border: 1px solid rgba(255,255,255,.18);
  color: rgba(255,255,255,.92);
  border-radius: 24px;
  padding: 18px 18px 14px;
  box-shadow: 0 30px 90px rgba(0,0,0,.35);
  backdrop-filter: blur(10px);
}

.space__title{
  font-weight: 950;
  font-size: 18px;
  margin-bottom: 6px;
  letter-spacing: .2px;
}

.space__text{
  color: rgba(255,255,255,.86);
  line-height: 1.48;
  font-size: 14px;
  white-space: pre-wrap;
}

.space__actions{
  display:flex;
  justify-content:flex-end;
  margin-top: 12px;
}

@media (prefers-reduced-motion: reduce){
  .btn:hover{ transform:none; }
  .heart-pin:hover{ transform: translate(-23px, -46px); }
}
